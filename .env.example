# ============================================
# PLANE v1.2.1 CONFIGURATION
# ============================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# --- Application Settings ---
APP_RELEASE=v1.2.1
APP_DOMAIN=your-domain.com
WEB_URL=https://${APP_DOMAIN}
DEBUG=0

# --- Replicas (Swarm scaling) ---
WEB_REPLICAS=1
SPACE_REPLICAS=1
ADMIN_REPLICAS=1
API_REPLICAS=1
WORKER_REPLICAS=1
BEAT_WORKER_REPLICAS=1
LIVE_REPLICAS=1

# --- Security ---
# Generate with: openssl rand -base64 48
SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_STRING
CORS_ALLOWED_ORIGINS=https://${APP_DOMAIN}

# --- Live Server ---
# Generate with: openssl rand -base64 24
LIVE_SERVER_SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_STRING

# ============================================
# DATABASE (PostgreSQL)
# ============================================
PGHOST=plane-db
PGDATABASE=plane
POSTGRES_USER=plane
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=plane
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@plane-db/plane

# ============================================
# REDIS (Valkey)
# ============================================
REDIS_HOST=plane-redis
REDIS_PORT=6379
REDIS_URL=redis://plane-redis:6379/

# ============================================
# MESSAGE QUEUE (RabbitMQ)
# ============================================
RABBITMQ_HOST=plane-mq
RABBITMQ_PORT=5672
RABBITMQ_USER=plane
RABBITMQ_PASSWORD=CHANGE_ME_STRONG_PASSWORD
RABBITMQ_VHOST=plane
AMQP_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@plane-mq:5672/plane

# ============================================
# OBJECT STORAGE (MinIO / S3)
# ============================================
USE_MINIO=1
AWS_REGION=
AWS_ACCESS_KEY_ID=minio-access-key
AWS_SECRET_ACCESS_KEY=CHANGE_ME_STRONG_PASSWORD
AWS_S3_ENDPOINT_URL=http://plane-minio:9000
AWS_S3_BUCKET_NAME=uploads
FILE_SIZE_LIMIT=5242880
MINIO_ENDPOINT_SSL=0

# ============================================
# API SETTINGS
# ============================================
API_BASE_URL=http://api:8000
GUNICORN_WORKERS=1
API_KEY_RATE_LIMIT=60/minute

# ============================================
# PROXY SETTINGS
# ============================================
# SSL terminated by Dokploy/Traefik
LISTEN_HTTP_PORT=80
LISTEN_HTTPS_PORT=443
SITE_ADDRESS=:80
TRUSTED_PROXIES=0.0.0.0/0
CERT_EMAIL=
CERT_ACME_CA=
CERT_ACME_DNS=

# ============================================
# MCP SERVER (Plane API for AI)
# ============================================
# Get API key from Plane: Profile → Settings → API Tokens
PLANE_API_KEY=your-plane-api-key
PLANE_WORKSPACE_SLUG=your-workspace-slug
MCP_PORT=8001
